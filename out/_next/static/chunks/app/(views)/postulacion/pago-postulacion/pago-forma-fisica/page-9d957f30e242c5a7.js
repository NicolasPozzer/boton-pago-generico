(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5583],{39166:function(e,t,r){Promise.resolve().then(r.bind(r,23677))},23677:function(e,t,r){"use strict";r.d(t,{default:function(){return O}});var a=r(57437),s=r(2265),n=r(89733),i=r(48185),o=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});l.displayName="Input";var d=r(13027);let c=(0,d.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)(c({variant:r}),t),...s})}var m=r(48484);let f=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(m.f,{ref:t,decorative:n,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...i})});f.displayName=m.f.displayName;var x=r(56935),p=r(22468),g=r(6884),h=r(58184),v=r(74697),b=r(22023),j=r(76780),N=r(71976),y=r(87992);let w=0,C=new Map,T=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?S(r):e.toasts.forEach(e=>{S(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};function S(e){if(C.has(e))return;let t=setTimeout(()=>{C.delete(e),k({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,t)}function k(e){E=T(E,e),R.forEach(e=>{e(E)})}let E={toasts:[]},R=[];function z(e){let{...t}=e,r=(w=(w+1)%Number.MAX_VALUE).toString(),a=()=>k({type:"DISMISS_TOAST",toastId:r});return k({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>k({type:"UPDATE_TOAST",toast:{...e,id:r}})}}var _=r(6509);_.zt,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.l_,{ref:t,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...s})}).displayName=_.l_.displayName;let A=(0,d.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}});s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)(_.fC,{ref:t,className:(0,o.cn)(A({variant:s}),r),...n})}).displayName=_.fC.displayName;let D=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.aU,{ref:t,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...s})});D.displayName=_.aU.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.x8,{ref:t,className:(0,o.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...s,children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})}).displayName=_.x8.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.Dx,{ref:t,className:(0,o.cn)("text-sm font-semibold [&+div]:text-xs",r),...s})}).displayName=_.Dx.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(_.dk,{ref:t,className:(0,o.cn)("text-sm opacity-90",r),...s})}).displayName=_.dk.displayName;var P=r(16463);function O(){let e=(0,P.useSearchParams)().get("amount")||"",[t,r]=(0,s.useState)(null),[o,d]=(0,s.useState)(e||"10"),[c,m]=(0,s.useState)(!1),[w,C]=(0,s.useState)(null),[T,S]=(0,s.useState)(null),[k,E]=(0,s.useState)(!1),[R,_]=(0,s.useState)(!1),[A,O]=(0,s.useState)(null),Z=(0,s.useRef)(null),M=async()=>{if(!t||!T){O("Debe generar un c\xf3digo de pago y subir un comprobante");return}E(!0),O(null);try{let e=new FormData;e.append("file",T),e.append("codigo_pago",t);let r=await fetch("/postulacion/pago-postulacion/pago-forma-fisica/",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.detail||"Error al subir el comprobante")}await r.json(),z({title:"Comprobante subido",description:"Tu comprobante ha sido recibido y est\xe1 en proceso de validaci\xf3n.",action:(0,a.jsx)(D,{altText:"Cerrar",children:"Cerrar"})}),_(!0)}catch(e){console.error("Error:",e),O(e instanceof Error?e.message:"Error al procesar el pago"),z({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Error al procesar el pago",action:(0,a.jsx)(D,{altText:"Cerrar",children:"Cerrar"})})}finally{E(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Pago de Postulaci\xf3n"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Genera tu c\xf3digo de pago y sube tu comprobante"})]}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)(i.Zb,{className:"shadow-md",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),"Proceso de Pago"]})}),(0,a.jsx)(i.aY,{className:"space-y-6",children:R?(0,a.jsxs)("div",{className:"text-center py-8 space-y-4",children:[(0,a.jsx)("div",{className:"mx-auto bg-green-100 rounded-full p-3 w-16 h-16 flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-green-700",children:"\xa1Pago Registrado Exitosamente!"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Tu comprobante ha sido recibido y est\xe1 en proceso de validaci\xf3n."}),(0,a.jsx)(n.z,{onClick:()=>{r(null),C(null),S(null),_(!1),O(null)},className:"mt-4",children:"Realizar otro pago"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Monto a pagar"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",o]})]}),(0,a.jsx)(u,{variant:"outline",className:"text-sm px-3 py-1",children:"Postulaci\xf3n Esc. Militar"})]}),(0,a.jsx)(f,{}),t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Tu c\xf3digo de pago"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-slate-100 p-3 rounded-l-md flex-1 text-center",children:(0,a.jsx)("span",{className:"text-xl font-mono font-bold tracking-wider",children:t})}),(0,a.jsx)(n.z,{variant:"outline",size:"icon",className:"rounded-l-none h-14",onClick:()=>{t&&(navigator.clipboard.writeText(t),m(!0),setTimeout(()=>m(!1),2e3))},children:c?(0,a.jsx)(p.Z,{className:"h-6 w-6"}):(0,a.jsx)(g.Z,{className:"h-6 w-6"})})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Utiliza este c\xf3digo para identificar tu pago en el banco"})]}),(0,a.jsx)(y.bZ,{children:(0,a.jsxs)(y.X,{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:"Instrucciones de pago:"}),(0,a.jsxs)("ol",{className:"list-decimal pl-5 mt-2 space-y-1",children:[(0,a.jsx)("li",{children:"Realiza una transferencia al Banco Estado"}),(0,a.jsx)("li",{children:"Cuenta Corriente: 9876543210"}),(0,a.jsx)("li",{children:"Titular: Escuela Militar"}),(0,a.jsx)("li",{children:"RUT: 61.101.XXX-X"}),(0,a.jsx)("li",{children:"Incluye el c\xf3digo de pago en el comentario"})]})]})}),(0,a.jsx)(f,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Subir comprobante de pago"}),w?(0,a.jsxs)("div",{className:"relative border rounded-md p-2",children:[(0,a.jsx)("div",{className:"absolute top-3 right-3 flex space-x-2",children:(0,a.jsx)(n.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-white rounded-full",onClick:()=>{C(null),S(null),Z.current&&(Z.current.value="")},children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})}),(null==T?void 0:T.type)==="application/pdf"?(0,a.jsxs)("div",{className:"flex items-center justify-center p-4 bg-slate-100 rounded",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-slate-500"}),(0,a.jsx)("p",{className:"ml-2 font-medium",children:T.name})]}):(0,a.jsx)("img",{src:w||"/placeholder.svg",alt:"Comprobante de pago",className:"w-full h-auto max-h-64 object-contain rounded"})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-md p-8 text-center cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>{var e;null===(e=Z.current)||void 0===e||e.click()},children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-slate-500"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Haz clic para subir tu comprobante"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Formatos aceptados: JPG, PNG, PDF"}),(0,a.jsx)(l,{type:"file",ref:Z,className:"hidden",accept:"image/*,.pdf",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(!r.type.match("image/*")&&"application/pdf"!==r.type){O("El archivo debe ser una imagen o PDF");return}if(r.size>5242880){O("El archivo no debe superar los 5MB");return}if(O(null),S(r),r.type.match("image/*")){let e=new FileReader;e.onload=e=>{var t;C(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(r)}else C("/placeholder.svg")}}})]}),A&&(0,a.jsxs)(y.bZ,{variant:"destructive",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)(y.X,{children:A})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-6 space-y-4",children:[(0,a.jsx)("p",{className:"text-slate-600",children:"Genera un c\xf3digo \xfanico para realizar tu pago"}),(0,a.jsx)(n.z,{onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<10;r++)t+=e.charAt(Math.floor(Math.random()*e.length));r(t)},className:"w-full sm:w-auto bg-neutral-950 hover:bg-neutral-600 text-white",children:"Generar C\xf3digo de Pago"})]})]})}),t&&w&&!R&&(0,a.jsxs)(i.eW,{className:"flex justify-end gap-3 pt-2",children:[(0,a.jsx)(n.z,{variant:"outline",disabled:k,onClick:()=>C(null),children:"Cambiar imagen"}),(0,a.jsxs)(n.z,{onClick:M,disabled:k,className:"flex items-center gap-2",children:[k?"Enviando...":"Confirmar Pago",!k&&(0,a.jsx)(N.Z,{className:"h-4 w-4"})]})]})]}),t&&!R&&(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-slate-500",children:(0,a.jsx)("p",{children:"Si tienes problemas con el pago, contacta a soporte@escuelamilitar.cl"})})]})]})}},87992:function(e,t,r){"use strict";r.d(t,{Cd:function(){return d},X:function(){return c},bZ:function(){return l}});var a=r(57437),s=r(13027),n=r(2265),i=r(49354);let o=(0,s.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:s}),r),...n})});l.displayName="Alert";let d=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});d.displayName="AlertTitle";let c=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});c.displayName="AlertDescription"},89733:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(57437),s=r(2265),n=r(71538),i=r(13027),o=r(49354);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var a=r(57437),s=r(2265),n=r(49354);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},49354:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(44839),s=r(96164);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[4251,8925,2971,7023,1744],function(){return e(e.s=39166)}),_N_E=e.O()}]);